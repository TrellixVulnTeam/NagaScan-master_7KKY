<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308292 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8149"/>

<div>
<span><div><span style="font-size: 18pt;">web控制台密码</span> <span style="color: rgb(88, 88, 88); font-family: 微软雅黑; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><a href="mailto:nagascan@example.com">nagascan@example.com</a>/Naga5c@n</span></div><div><span style="font-size: 18pt;">first注意点：mitmdump在python3 VENV下执行</span></div><div><span style="font-size: 18pt;">         nagascan的代码在python2 下执行</span></div><div><font style="font-size: 18pt;"><br/></font></div><div><span style="font-size: 24px;">second注意点：数据库怎么来的source schema.sql 。老是执行失败，所以直接将</span><span style="font-size: 24px;">schema.sql里面命令复制直接在mysql下面执行就好</span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;">third 注意点： 代码中各种数据库连接的密码要改，</span> <span style="color: rgb(88, 88, 88); font-family: 微软雅黑; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">scanner/lib/db_operation.py     </span> <span style="color: rgb(88, 88, 88); font-family: 微软雅黑; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">parser/lib/db_operation.py</span></div><div><span style="color: rgb(88, 88, 88); font-family: 微软雅黑; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div><span style="font-size: 18pt;">fourth 注意点：如果解析</span><span style="font-size: 18pt;"> /tmp/mitmlogs.txt时不希望加入google，baidu，ctrip去存入数据库扫，那么可以在web界面加上</span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div><font style="font-size: 18pt;"><br/></font></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;">////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span></div><div><span style="font-size: 24px;"><br/></span></div><div><span style="font-size: 24px;"><br/></span></div><div><font style="font-size: 18pt;">(venv) [root@localhost bin]# ./mitmdump -p 8888 -s &quot;/home/moon/Downloads/NagaScan-master/proxy/proxy_mitmproxy.py&quot;  /tmp/mitmlogs.txt </font> <span style="font-size: 18pt;">--no-ssl-insecure </span><font style="font-size: 18pt;">是开启代理端口，且把日志输入到/tmp/mitmlogs.txt ，且这里要在venv环境下执行</font></div><div><font style="font-size: 18pt;">这里原始的地方有个<font style="color: rgb(241, 79, 154);">bug</font> ，如果参照上面的命令方式，参数5： /tmp/mitmlogs.txt 才是日志要写入的地方</font></div><div><br/></div><div><img src="nagascan bug 与开启方式_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 18pt;">[root@localhost NagaScan-master]# python parser/parser_mitmproxy.py  /tmp/mitmlogs.txt </font></div><div><font style="font-size: 18pt;">是解析/tmp/mitmlogs.txt 里面的日志用的</font></div><div><span style="font-size: 18pt; color: rgb(235, 0, 115);"><br/></span></div><div><span style="font-size: 24px;">解析日志的同时，会插数据库</span><span style="font-family: 宋体;"><font style="font-size: 18pt; color: rgb(227, 0, 0);">insert_request(request_info_parsed)，</font></span></div><div><font color="#E30000" face="宋体"><span style="font-size: 24px;">然后xss扫描脚本才会从数据库中去重拿数据进行扫描</span></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 18pt;">开启web 日志的地方代码也要改，<font style="color: rgb(255, 0, 0);">有bug</font>：</font></div><div><span style="font-size: 18pt;">vim /home/moon/Downloads/NagaScan-master/www/utils.py</span></div><div><span style="font-size: 24px;">开启日志的命令</span></div><div><span style="font-size: 18pt;">./wsgiapp.py</span></div><div><br/></div><div><img src="nagascan bug 与开启方式_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><span style="font-size: 18pt;">sqlmap自动扫描，需要在装有sqlmap的机器上</span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [4].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [5].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 24px;">当你启动了scan_sqli.py 那就把把数据库中前10000条scan_type既scan_sqli=0的全部取出来扫</span></div><div><span style="font-size: 24px;">所以如果要一个越权扫描，等加一个默认=0的表字段scan_tyuequan =0</span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [6].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [7].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [8].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="color: rgb(105, 170, 53);"><br/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [9].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [10].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 24px;">成功</span></div><div><span style="font-size: 24px;"><br/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [11].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [12].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt;"><img src="nagascan bug 与开启方式_files/Image [13].png" type="image/png" data-filename="Image.png"/></span></div></span>
</div></body></html> 